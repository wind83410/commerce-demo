(function(e){function t(t){for(var a,r,i=t[0],u=t[1],s=t[2],d=0,f=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(c,r)&&c[r]&&f.push(c[r][0]),c[r]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);l&&l(t);while(f.length)f.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,r=1;r<n.length;r++){var i=n[r];0!==c[i]&&(a=!1)}a&&(o.splice(t--,1),e=u(u.s=n[0]))}return e}var a={},r={app:0},c={app:0},o=[];function i(e){return u.p+"js/"+({}[e]||e)+"."+{"chunk-08aeb3d6":"44cfc254","chunk-180948c8":"a7c8704c","chunk-2964f60c":"8af9ace7","chunk-2d0b72a8":"ab559509","chunk-2d0d72d1":"5814555a","chunk-2d0de184":"946e4ac1","chunk-4fcff732":"2eca23b4"}[e]+".js"}function u(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={"chunk-08aeb3d6":1,"chunk-4fcff732":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-08aeb3d6":"ad4fef4a","chunk-180948c8":"31d6cfe0","chunk-2964f60c":"31d6cfe0","chunk-2d0b72a8":"31d6cfe0","chunk-2d0d72d1":"31d6cfe0","chunk-2d0de184":"31d6cfe0","chunk-4fcff732":"a39a0057"}[e]+".css",c=u.p+a,o=document.getElementsByTagName("link"),i=0;i<o.length;i++){var s=o[i],d=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(d===a||d===c))return t()}var f=document.getElementsByTagName("style");for(i=0;i<f.length;i++){s=f[i],d=s.getAttribute("data-href");if(d===a||d===c)return t()}var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",l.onload=t,l.onerror=function(t){var a=t&&t.target&&t.target.src||c,o=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=a,delete r[e],l.parentNode.removeChild(l),n(o)},l.href=c;var p=document.getElementsByTagName("head")[0];p.appendChild(l)})).then((function(){r[e]=0})));var a=c[e];if(0!==a)if(a)t.push(a[2]);else{var o=new Promise((function(t,n){a=c[e]=[t,n]}));t.push(a[2]=o);var s,d=document.createElement("script");d.charset="utf-8",d.timeout=120,u.nc&&d.setAttribute("nonce",u.nc),d.src=i(e);var f=new Error;s=function(t){d.onerror=d.onload=null,clearTimeout(l);var n=c[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;f.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",f.name="ChunkLoadError",f.type=a,f.request=r,n[1](f)}c[e]=void 0}};var l=setTimeout((function(){s({type:"timeout",target:d})}),12e4);d.onerror=d.onload=s,document.head.appendChild(d)}return Promise.all(t)},u.m=e,u.c=a,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)u.d(n,a,function(t){return e[t]}.bind(null,a));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/commerce-demo/",u.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],d=s.push.bind(s);s.push=t,s=s.slice();for(var f=0;f<s.length;f++)t(s[f]);var l=d;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"131f":function(e){e.exports=JSON.parse('{"validations":{"messages":{"email":"請輸入有效的{_field_}","tel":"請輸入有效{_field_}","required":"{_field_}必填"}},"fields":{"full name":"姓名","email":"電子郵件","tel":"連絡電話","message":"留言","address":"地址"}}')},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=n("2f62"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],i=(n("5c0b"),n("2877")),u={},s=Object(i["a"])(u,c,o,!1,null,null,null),d=s.exports,f=n("bc3a"),l=n.n(f),p=n("a7fe"),h=n.n(p),m=(n("d3b7"),n("8c4f"));a["a"].use(m["a"]);var v=[{path:"/",component:function(){return n.e("chunk-08aeb3d6").then(n.bind(null,"ebad"))},children:[{path:"",name:"Index",component:function(){return n.e("chunk-4fcff732").then(n.bind(null,"d504"))}},{path:"products/:category/:type",name:"Products",component:function(){return n.e("chunk-180948c8").then(n.bind(null,"e6dc"))}},{path:"check",component:function(){return n.e("chunk-2d0b72a8").then(n.bind(null,"1feb"))},children:[{path:"",name:"Check",component:function(){return n.e("chunk-2d0de184").then(n.bind(null,"83d7"))}},{path:"recipient",name:"Recipient",component:function(){return n.e("chunk-2964f60c").then(n.bind(null,"b82d"))},meta:{requireAuth:!0,pathFrom:"/check"}},{path:"clinch/:orderId",name:"Deal clinched",component:function(){return n.e("chunk-2d0d72d1").then(n.bind(null,"7662"))},meta:{pathFrom:"/check/recipient",orderSentCheck:!0}}]}]}],b=new m["a"]({routes:v}),g=b,k=n("ecee"),O=n("c074"),y=n("ad3d"),I=(n("4989"),n("4160"),n("ac1f"),n("466d"),n("159b"),n("ddb0"),n("a925"));function _(){var e=n("9cd7"),t={};return e.keys().forEach((function(n){var a=n.match(/([A-Za-z0-9-_]+)\./i);if(a&&a.length>1){var r=a[1];t[r]=e(n)}})),t}a["a"].use(I["a"]);var w=new I["a"]({locale:"zh-tw",fallbackLocale:"en",messages:_()}),S=n("7bb1"),E=(n("99af"),n("c740"),n("a434"),n("ade3"));a["a"].use(r["a"]);var D=new r["a"].Store({strict:!0,state:{isLoading:!1,isLogined:!1,cart:{carts:[],final_total:0,total:0},products:[],orderIdSent:"",popUpInfo:[]},actions:{getProducts:function(e){var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("mackchen","/products/all");return new Promise((function(n,a){l.a.get(t).then((function(t){t.data.success?(e.commit("PRODUCTS",t.data.products),n()):a(Error("failed to get product list"))}))}))},getCart:function(e){var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("mackchen","/cart");return new Promise((function(n,a){l.a.get(t).then((function(t){t.data.success?(e.commit("CART_REFRESH",t.data.data),n()):a(Error("unable to get cart from server"))}))}))},rmCartItem:function(e,t){var n="".concat("https://vue-course-api.hexschool.io","/api/").concat("mackchen","/cart/").concat(t);return new Promise((function(t,a){l.a.delete(n).then((function(n){n.data.success?(e.dispatch("getCart"),t()):a(Error(n.data.message))}))}))},addCartItem:function(e,t){var n,a=t.productId,r=t.qty,c=void 0===r?1:r,o="".concat("https://vue-course-api.hexschool.io","/api/").concat("mackchen","/cart"),i="product_id",u=(n={},Object(E["a"])(n,i,a),Object(E["a"])(n,"qty",c),n);l.a.post(o,{data:u}).then((function(t){t.data.success&&e.dispatch("getCart")}))},sign:function(e,t){var n=e.commit;n("ISLOGINED",t)},await:function(e,t){var n=e.commit;n("ISLOADING",t)},recordOrderId:function(e,t){var n=e.commit;n("ORDERIDSENT_RECORD",t)},addInfo:function(e,t){var n=e.commit,a=e.dispatch,r=t.msg,c=t.status,o=t.timeStamp,i={msg:r,status:c,timeStamp:o};n("INFO_ADD",i),setTimeout((function(){return a("rmInfo",o)}),5e3)},rmInfo:function(e,t){var n=e.commit;n("INFO_DEL",t)}},mutations:{PRODUCTS:function(e,t){e.products=t},CART_REFRESH:function(e,t){e.cart=t},ISLOGINED:function(e,t){e.isLogined=t},ISLOADING:function(e,t){e.isLoading=t},ORDERIDSENT_RECORD:function(e,t){e.orderIdSent=t},INFO_DEL:function(e,t){var n=e.popUpInfo.findIndex((function(e){return e.timeStamp===t}));e.popUpInfo.splice(n,1)},INFO_ADD:function(e,t){e.popUpInfo.push(t)}}});a["a"].component("validation-provider",S["b"]),a["a"].component("validation-observer",S["a"]),Object(S["c"])({defaultMessage:function(e,t){return t._field_=w.t("fields.".concat(e)),w.t("validations.messages.".concat(t._rule_),t)},classes:{valid:"is-valid",invalid:"is-invalid"}}),k["c"].add(O["f"],O["e"],O["h"],O["c"],O["d"],O["i"],O["b"],O["a"],O["k"],O["o"],O["j"],O["p"],O["r"],O["q"],O["l"],O["m"],O["g"],O["n"]),a["a"].component("font-awesome-icon",y["a"]),a["a"].config.productionTip=!1,l.a.defaults.withCredentials=!0,a["a"].use(h.a,l.a),a["a"].use(r["a"]),new a["a"]({router:g,i18n:w,store:D,render:function(e){return e(d)}}).$mount("#app"),g.beforeEach((function(e,t,n){if(e.meta.pathFrom)if(t.path===e.meta.pathFrom)if(e.meta.requireAuth){var a="".concat("https://vue-course-api.hexschool.io","/api/user/check");l.a.post(a).then((function(e){e.data.success?n():(n(!1),D.dispatch("addInfo",{msg:"驗證失敗，請重新登入",status:"danger",timeStamp:Math.floor(new Date)}))})).catch((function(){n(!1),D.dispatch("addInfo",{msg:"網路斷線無法驗證，請稍後再試",status:"danger",timeStamp:Math.floor(new Date)})}))}else e.meta.orderSentCheck&&D.state.orderIdSent?n():n(!1);else n("/check");else n()}))},"5c0b":function(e,t,n){"use strict";var a=n("9c0c"),r=n.n(a);r.a},"9c0c":function(e,t,n){},"9cd7":function(e,t,n){var a={"./en.json":"acc6","./zh-tw.json":"131f"};function r(e){var t=c(e);return n(t)}function c(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=c,e.exports=r,r.id="9cd7"},acc6:function(e){e.exports=JSON.parse('{"message":"hello i18n !!"}')}});
//# sourceMappingURL=app.0d81fcb6.js.map