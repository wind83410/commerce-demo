(function(t){function e(e){for(var a,o,u=e[0],s=e[1],i=e[2],d=0,p=[];d<u.length;d++)o=u[d],Object.prototype.hasOwnProperty.call(c,o)&&c[o]&&p.push(c[o][0]),c[o]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a]);f&&f(e);while(p.length)p.shift()();return r.push.apply(r,i||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,o=1;o<n.length;o++){var s=n[o];0!==c[s]&&(a=!1)}a&&(r.splice(e--,1),t=u(u.s=n[0]))}return t}var a={},c={app:0},r=[];function o(t){return u.p+"js/"+({}[t]||t)+"."+{"chunk-18738360":"fa0737f2","chunk-1072185d":"5712b6b0","chunk-f900c798":"ac83c491","chunk-2d0c4286":"65296add","chunk-2d0c96fa":"3543650c","chunk-2d0dd48c":"d01ed74f","chunk-46f830ee":"c7e929c9","chunk-56821d2e":"2a26bcec","chunk-745fefca":"800bc264","chunk-829f8e2c":"718b4627","chunk-b1f5591a":"e38a612b","chunk-c27b3982":"3635c07a","chunk-e5cf319e":"c8d1b0fb","chunk-6bf9dcac":"db54b1b2","chunk-d91e706c":"814113fd","chunk-f8fc6c10":"f87d7a97"}[t]+".js"}function u(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(t){var e=[],n=c[t];if(0!==n)if(n)e.push(n[2]);else{var a=new Promise((function(e,a){n=c[t]=[e,a]}));e.push(n[2]=a);var r,s=document.createElement("script");s.charset="utf-8",s.timeout=120,u.nc&&s.setAttribute("nonce",u.nc),s.src=o(t);var i=new Error;r=function(e){s.onerror=s.onload=null,clearTimeout(d);var n=c[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;i.message="Loading chunk "+t+" failed.\n("+a+": "+r+")",i.name="ChunkLoadError",i.type=a,i.request=r,n[1](i)}c[t]=void 0}};var d=setTimeout((function(){r({type:"timeout",target:s})}),12e4);s.onerror=s.onload=r,document.head.appendChild(s)}return Promise.all(e)},u.m=t,u.c=a,u.d=function(t,e,n){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},u.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)u.d(n,a,function(e){return t[e]}.bind(null,a));return n},u.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="",u.oe=function(t){throw console.error(t),t};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=e,s=s.slice();for(var d=0;d<s.length;d++)e(s[d]);var f=i;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},3015:function(t,e,n){var a={"./en.json":"d4b1","./zh-tw.json":"f89a"};function c(t){var e=r(t);return n(e)}function r(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}c.keys=function(){return Object.keys(a)},c.resolve=r,t.exports=c,c.id="3015"},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),c=n("2f62"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],u=(n("5c0b"),n("2877")),s={},i=Object(u["a"])(s,r,o,!1,null,null,null),d=i.exports,f=n("bc3a"),p=n.n(f),h=n("a7fe"),l=n.n(h),m=(n("d3b7"),n("8c4f"));a["a"].use(m["a"]);var g=[{path:"/",component:function(){return n.e("chunk-829f8e2c").then(n.bind(null,"2277"))},children:[{path:"",name:"Index",component:function(){return Promise.all([n.e("chunk-18738360"),n.e("chunk-1072185d")]).then(n.bind(null,"8a2e"))}},{path:"products/:category/",component:function(){return n.e("chunk-46f830ee").then(n.bind(null,"0ce9"))},children:[{path:"",name:"Products",component:function(){return n.e("chunk-c27b3982").then(n.bind(null,"81b1"))}},{path:":itemId",name:"Product detail",component:function(){return n.e("chunk-b1f5591a").then(n.bind(null,"5bae"))}}]},{path:"check",component:function(){return n.e("chunk-2d0c96fa").then(n.bind(null,"58ab"))},children:[{path:"",name:"Check",component:function(){return Promise.all([n.e("chunk-18738360"),n.e("chunk-f900c798")]).then(n.bind(null,"2feb1"))}},{path:"customer",name:"Check customer",component:function(){return n.e("chunk-56821d2e").then(n.bind(null,"1c45"))},meta:{pathFrom:"/check"}},{path:"order/:orderId",name:"Check order",component:function(){return n.e("chunk-2d0c4286").then(n.bind(null,"3a46"))},meta:{pathFrom:"/check/customer",orderSentCheck:!0}},{path:"paid/:orderId",name:"Check paid",component:function(){return n.e("chunk-2d0dd48c").then(n.bind(null,"8174"))}}]}]},{path:"/admin",name:"Admin",component:function(){return n.e("chunk-745fefca").then(n.bind(null,"cbb0"))},children:[{path:"product-list",name:"Admin product list",component:function(){return Promise.all([n.e("chunk-e5cf319e"),n.e("chunk-d91e706c")]).then(n.bind(null,"19f7"))},meta:{requireAuth:!0}},{path:"coupons",name:"Admin coupon list",component:function(){return n.e("chunk-f8fc6c10").then(n.bind(null,"0253"))},meta:{requireAuth:!0}},{path:"orders",name:"Backstage order list",component:function(){return Promise.all([n.e("chunk-e5cf319e"),n.e("chunk-6bf9dcac")]).then(n.bind(null,"a71f"))},meta:{requireAuth:!0}}]},{path:"*",redirect:"/"}],b=new m["a"]({routes:g}),v=b,k=n("ecee"),I=n("c074"),O=n("f2d1"),S=n("ad3d"),R=(n("4989"),n("4160"),n("ac1f"),n("466d"),n("159b"),n("ddb0"),n("a925"));function _(){var t=n("3015"),e={};return t.keys().forEach((function(n){var a=n.match(/([A-Za-z0-9-_]+)\./i);if(a&&a.length>1){var c=a[1];e[c]=t(n)}})),e}a["a"].use(R["a"]);var w=new R["a"]({locale:"zh-tw",fallbackLocale:"en",messages:_()}),E=n("7bb1"),P=(n("99af"),n("7db0"),n("c740"),n("a434"),n("ade3")),y=(n("96cf"),n("1da1"));a["a"].use(c["a"]);var D=new c["a"].Store({strict:!0,state:{isLoading:!1,isLogined:!1,cart:{carts:[],final_total:0,total:0},products:[],orderIdSent:"",popUpInfo:[],bsProducts:[],bsCoupons:[],bsOrders:[]},actions:{getProducts:function(t){var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("mackchen","/products/all");return new Promise((function(n,a){p.a.get(e).then((function(e){e.data.success?(t.commit("PRODUCTS",e.data.products),n()):(t.dispatch("addInfo",{msg:e.data.message,status:"danger"}),a(Error(e.data.message)))})).catch((function(){t.dispatch("addInfo",{msg:"無法和伺服器連線 (XMLHttpRequest error)",status:"danger"}),a(Error("無法和伺服器連線 (XMLHttpRequest error)"))}))}))},getCart:function(t){var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("mackchen","/cart");return new Promise((function(n,a){p.a.get(e).then((function(e){e.data.success?(t.commit("CART_REFRESH",e.data.data),n()):(t.dispatch("addInfo",{msg:e.data.message,status:"danger"}),a(Error(e.data.message)))})).catch((function(){t.dispatch("addInfo",{msg:"無法和伺服器連線 (XMLHttpRequest error)",status:"danger"}),a(Error("無法和伺服器連線 (XMLHttpRequest error)"))}))}))},rmCartItem:function(t,e){var n="".concat("https://vue-course-api.hexschool.io","/api/").concat("mackchen","/cart/").concat(e);return p.a.delete(n).then((function(e){e.data.success?t.dispatch("getCart"):t.dispatch("addInfo",{msg:e.data.message,status:"danger"})})).catch((function(){t.dispatch("addInfo",{msg:"無法和伺服器連線 (XMLHttpRequest error)",status:"danger"})}))},addCartItem:function(t,e){return Object(y["a"])(regeneratorRuntime.mark((function n(){var a,c,r,o,u,s,i,d,f,h,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(c=e.productId,r=e.qty,o=void 0===r?1:r,u=e.acc,s=void 0!==u&&u,i="".concat("https://vue-course-api.hexschool.io","/api/").concat("mackchen","/cart"),d=t.getters.GET_DUPLICATED_PROD(c),f="product_id",a={},Object(P["a"])(a,f,c),Object(P["a"])(a,"qty",o),h=a,!d){n.next=12;break}return l=!1,n.next=9,p.a.delete(i+"/".concat(d.id)).then((function(e){e.data.success||(t.dispatch("addInfo",{msg:e.data.message,status:"danger"}),l=!0)})).catch((function(){t.dispatch("addInfo",{msg:"無法和伺服器連線 (XMLHttpRequest error)",status:"danger"}),l=!0}));case 9:if(!l){n.next=11;break}return n.abrupt("return",0);case 11:h.qty=s?h.qty+d.qty:h.qty;case 12:return n.abrupt("return",p.a.post(i,{data:h}).then((function(e){e.data.success?t.dispatch("getCart"):t.dispatch("addInfo",{msg:e.data.message,status:"danger"})})).catch((function(){t.dispatch("addInfo",{msg:"無法和伺服器連線 (XMLHttpRequest error)",status:"danger"})})));case 13:case"end":return n.stop()}}),n)})))()},getBsProducts:function(t){var e=t.commit,n=t.dispatch,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("mackchen","/admin/products/all");return p.a.get(a).then((function(t){if(t.data.success){var a=[];for(var c in t.data.products)a.push(t.data.products[c]);e("BSPRODUCTS",a)}else n("addInfo",{msg:t.data.message,status:"danger"})})).catch((function(){n("addInfo",{msg:"無法和伺服器連線 (XMLHttpRequest error)",status:"danger"})}))},getBsCoupons:function(t,e){var n=t.dispatch,a=t.commit,c="".concat("https://vue-course-api.hexschool.io","/api/").concat("mackchen","/admin/coupons?page=").concat(e);return p.a.get(c).then((function(t){if(t.data.success)return a("BSCOUPONS",t.data.coupons),n("addInfo",{msg:"成功取得優惠券",status:"success"}),{pagination:t.data.pagination};n("addInfo",{msg:t.data.message,status:"danger"})})).catch((function(){n("addInfo",{msg:"無法和伺服器連線 (XMLHttpRequest error)",status:"danger"})}))},getBsOrders:function(t){var e=t.commit,n=t.dispatch,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,c="".concat("https://vue-course-api.hexschool.io","/api/").concat("mackchen","/admin/orders?page=").concat(a);return p.a.get(c).then((function(t){if(t.data.success)return e("BSORDERS",t.data.orders),n("addInfo",{msg:"成功取得訂單列表",status:"success"}),t.data.pagination;n("addInfo",{msg:t.data.message,status:"danger"})})).catch((function(){n("addInfo",{msg:"無法和伺服器連線 (XMLHttpRequest error)",status:"danger"})}))},sign:function(t,e){var n=t.commit;n("ISLOGINED",e)},await:function(t,e){var n=t.commit;n("ISLOADING",e)},recordOrderId:function(t,e){var n=t.commit;n("ORDERIDSENT_RECORD",e)},addInfo:function(t,e){var n=t.commit,a=t.dispatch,c=e.msg,r=e.status,o=Math.floor(new Date/1e3),u={msg:c,status:r,timeStamp:o};n("INFO_ADD",u),setTimeout((function(){return a("rmInfo",o)}),5e3)},rmInfo:function(t,e){var n=t.commit;n("INFO_DEL",e)}},mutations:{PRODUCTS:function(t,e){t.products=e},CART_REFRESH:function(t,e){t.cart=e},ISLOGINED:function(t,e){t.isLogined=e},ISLOADING:function(t,e){t.isLoading=e},ORDERIDSENT_RECORD:function(t,e){t.orderIdSent=e},INFO_DEL:function(t,e){var n=t.popUpInfo.findIndex((function(t){return t.timeStamp===e}));t.popUpInfo.splice(n,1)},INFO_ADD:function(t,e){t.popUpInfo.push(e)},BSPRODUCTS:function(t,e){t.bsProducts=e},BSCOUPONS:function(t,e){t.bsCoupons=e},BSORDERS:function(t,e){t.bsOrders=e}},getters:{GET_DUPLICATED_PROD:function(t){return function(e){return t.cart.carts.find((function(t){return t.product_id===e}))}}}});a["a"].component("validation-provider",E["b"]),a["a"].component("validation-observer",E["a"]),Object(E["c"])({defaultMessage:function(t,e){return e._field_=w.t("fields.".concat(t)),w.t("validations.messages.".concat(e._rule_),e)},classes:{valid:"is-valid",invalid:"is-invalid"}}),k["c"].add(I["h"],I["g"],I["j"],I["e"],I["f"],I["k"],I["c"],I["a"],I["n"],I["s"],I["m"],I["l"],I["t"],I["b"],I["u"],I["o"],I["p"],I["i"],I["r"],O["b"],O["a"],O["c"],I["d"],I["q"]),a["a"].component("font-awesome-icon",S["a"]),a["a"].config.productionTip=!1,p.a.defaults.withCredentials=!0,a["a"].use(l.a,p.a),a["a"].use(c["a"]),new a["a"]({router:v,i18n:w,store:D,render:function(t){return t(d)}}).$mount("#app"),v.beforeEach((function(t,e,n){if(t.meta.requireAuth){var a="".concat("https://vue-course-api.hexschool.io","/api/user/check");p.a.post(a).then((function(t){t.data.success?n():(n(!1),D.dispatch("addInfo",{msg:"驗證失敗，請重新登入",status:"danger"}))})).catch((function(){n(!1),D.dispatch("addInfo",{msg:"網路斷線無法驗證，請稍後再試",status:"danger"})}))}else t.meta.pathFrom?(console.log(e.path),e.path===t.meta.pathFrom?t.meta.orderSentCheck?""!==D.state.orderIdSent?n():n(!1):n():n(!1)):n()}))},"5c0b":function(t,e,n){"use strict";var a=n("9c0c"),c=n.n(a);c.a},"9c0c":function(t,e,n){},d4b1:function(t){t.exports=JSON.parse('{"message":"hello i18n !!","tags":{"bestseller":"Bestseller","picked":"Picked","new":"New-in"}}')},f89a:function(t){t.exports=JSON.parse('{"validations":{"messages":{"email":"請輸入有效的{_field_}","tel":"請輸入有效{_field_}","required":"{_field_}必填"}},"fields":{"full name":"姓名","email":"電子郵件","tel":"連絡電話","message":"留言","address":"地址"},"tags":{"bestseller":"熱賣","picked":"精選","new":"新品"}}')}});
//# sourceMappingURL=app.8c099d5e.js.map